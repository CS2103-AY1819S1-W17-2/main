<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>He Zhenfeng - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">modsUni</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/CS2103-AY1819S1-W17-2/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>He Zhenfeng - Project Portfolio</h1></div><div id="content"><div class="sect1">
<h2 id="project-modsuni"><a class="link" href="#project-modsuni">PROJECT: ModsUni</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>modsUni is a desktop timetable management application created by students for students. It incorporates a simple GUI with majority of its user interactions occurring in its in-built CLI.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>What it does:</p>
</li>
<li>
<p>Justification:</p>
</li>
<li>
<p>Highlights:</p>
</li>
<li>
<p>Credits:</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>:</p>
</li>
<li>
<p><strong>Code contributed</strong>:</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="data-security-feature"><a class="link" href="#data-security-feature">Data Security Feature</a></h3>
<div class="paragraph">
<p>The data security feature mainly involves the encryption of the user data file when using the <code>save</code> command and the decryption of a user data file when logging in using the <code>login</code> command.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Advanced Encryption Standard (AES) is the algorithm used for encryption.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This section will describe in details the current implementation and the design considerations of the data encryption &amp; decryption feature.</p>
</div>
<hr>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>The data security feature is facilitated by <code>DataSecurityUtil</code> class.<br>
It implements the following operations(s):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DataSecurityUtil#encryptFile(…​)</code> — Encrypts a <code>File</code> object with the specified password and overrides the original unencrypted file.</p>
</li>
<li>
<p><code>DataSecurityUtil#decryptFile(…​)</code> — Decrypts a <code>File</code> object with the specified password and overrides the original encrypted file.</p>
</li>
<li>
<p><code>DataSecurityUtil#encrypt(…​)</code> — Encrypts a <code>byte[]</code> with the specified password and returns the encrypted <code>byte[]</code>.</p>
</li>
<li>
<p><code>DataSecurityUtil#decrypt(…​)</code> — Decrypts a <code>byte[]</code> with the specified password and returns the decrypted <code>byte[]</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>DataSecurityUtil</code> class utilizes <code>javax.crypto.cipher</code> and <code>javax.crypto.spec.SecretKeySpec</code> packages for the operations mentioned above.</p>
</div>
<div class="paragraph">
<p>The <code>Hashing</code> class is used to generate a SHA-1 hash to ensure that there are at least 16 bytes (128 bits) which are required to generate <code>SecretKeySpec</code>.</p>
</div>
<div class="paragraph">
<p>Currently, encryption is performed in <code>StorageManager</code> and decryption is performed in <code>LoginCommand</code> where the file is loaded.</p>
</div>
<div class="sect4">
<h5 id="implementation-of-the-encryption-feature"><a class="link" href="#implementation-of-the-encryption-feature">Implementation of the encryption feature</a></h5>
<div class="paragraph">
<p>The encryption feature is integrated with the save user feature (3.6).<br>
Immediately after the user data file is saved onto local disk, <code>DataSecurityUtil#encryptFile(&#8230;&#8203;)</code> will be called to encrypt the file.
This is shown in the following code snippet below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> handleSaveUserChangedEvent(SaveUserChangedEvent cuce) {
    <span class="comment">// ... logging ...</span>
    <span class="keyword">try</span> {
        userStorage.saveUser(cuce.user, cuce.filePath);
        DataSecurityUtil.encryptFile(cuce.filePath.toFile(),
                cuce.password.getValue());
    } <span class="keyword">catch</span> (<span class="exception">IOException</span> e) {
        logger.warning(<span class="string"><span class="delimiter">&quot;</span><span class="content">Unable to save or encrypt data</span><span class="delimiter">&quot;</span></span>);
        e.printStackTrace();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The sequence diagram shown below in Figure 1 illustrates the integration of encryption with the save user feature.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SequenceDiagramforSaveEventHandlingWithEncryption.png" alt="SequenceDiagramforSaveEventHandlingWithEncryption" width="650">
</div>
</div>
<div class="paragraph">
<p><em>Figure 1. Sequence Diagram for the interaction between EventsCenter and Storage Components when executing SaveCommand with encryption</em></p>
</div>
</div>
<div class="sect4">
<h5 id="implementation-of-the-decryption-feature"><a class="link" href="#implementation-of-the-decryption-feature">Implementation of the decryption feature</a></h5>
<div class="paragraph">
<p>The decryption feature is integrated with the login feature under user account management(3.1).<br>
<code>LoginCommand</code> calls <code>DataSecurityUtil#decryptFile(&#8230;&#8203;)</code> once the validation of the user is completed.</p>
</div>
<div class="paragraph">
<p>This is shown in the following code snippet below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> CommandResult execute(Model model, CommandHistory history) <span class="directive">throws</span> CommandException {
        <span class="comment">// ... check if user logged in ... //</span>
        <span class="comment">// ... check if credential is valid .. //</span>

        User toSetCurrentUser;
        <span class="keyword">try</span> {
            DataSecurityUtil.decryptFile(pathToSaveFile.toFile(),
                toLogin.getPassword().toString());

            Optional&lt;User&gt; userFromFile = model.readUserFile(pathToSaveFile);
            <span class="keyword">if</span> (!userFromFile.isPresent()) {
                <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(MESSAGE_UNABLE_TO_READ_FILE);
            }
            toSetCurrentUser = userFromFile.get();

            DataSecurityUtil.encryptFile(pathToSaveFile.toFile(), toLogin.getPassword().getValue());
        } <span class="keyword">catch</span> (DataConversionException | <span class="exception">IOException</span> | CorruptedFileException
            | <span class="exception">NoSuchAlgorithmException</span> | <span class="exception">InvalidKeyException</span> | InvalidPasswordException
            | <span class="exception">NoSuchPaddingException</span> e) {
            <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(MESSAGE_UNABLE_TO_READ_FILE);
        }

        model.setCurrentUser(toSetCurrentUser);
        <span class="keyword">return</span> <span class="keyword">new</span> CommandResult(<span class="predefined-type">String</span>.format(MESSAGE_SUCCESS,
            toSetCurrentUser.getUsername()));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The sequence diagram shown below in Figure 2 illustrates the integration of decryption with the login feature.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SDforSaveCommandLogicAndModelUserDecryption.png" alt="SDforSaveCommandLogicAndModelUserDecryption" width="900">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2. Sequence Diagram for the interaction between Logic Component and DataSecurityUtil when executing LoginCommand</em></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-how-encryption-is-implemented"><a class="link" href="#aspect-how-encryption-is-implemented">Aspect: How encryption is implemented</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Implement as an in-built feature.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Ensures that the confidentiality of a user&#8217;s data file is preserved at all times.</p>
</li>
<li>
<p>Cons: Users do not have full control.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Implement as a command.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Users will have more control on the data security.</p>
</li>
<li>
<p>Cons: Unable to enforce the data security of the application.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-generation-of-security-key-for-encryption-decryption"><a class="link" href="#aspect-generation-of-security-key-for-encryption-decryption">Aspect: Generation of security key for encryption/decryption</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Generate the key using a user&#8217;s password.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: User does not need to supply additional information or file for encryption/decryption.</p>
</li>
<li>
<p>Cons: User is unable to decrypt their user data file if they forget their password.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Generate the key using <code>KeyGenerator</code> and an additional file is needed to log in.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: The key will be more secured compared to the key generated from alternative 1.</p>
</li>
<li>
<p>Cons: User is unable to decrypt their user data file if the key file is lost or corrupted.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2018-10-30 14:40:11 UTC</div></div></div></body></html>