<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Edric Teo - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">modsUni</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/CS2103-AY1819S1-W17-2/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Edric Teo - Project Portfolio</h1></div><div id="content"><div class="sect1">
<h2 id="project-modsuni"><a class="link" href="#project-modsuni">PROJECT: modsUni</a></h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="1-overview"><a class="link" href="#1-overview">1. Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This portfolio documents my contribution to the project - <strong>modsUni</strong>.
modsUni is an open-sourced project that was collaborated with 4 other coursemates from the module CS2103 (Introduction to Software Engineering).</p>
</div>
<div class="paragraph">
<p>Project <strong>modsUni</strong> is a desktop application that was developed in 6 weeks which allowed us to practice our software engineering skills in a short time frame.
This project aims to accelerate the process of planning a candidature for a university student.
It was developed for users who prefer to interact with a Command Line Interface (CLI) over a Graphical User Interface (GUI).
We have managed to contribute ~27,000 lines of code to a code base of 10,000 lines of code.
Currently, we are targeting undergraduates from the National University of Singapore (NUS), and plan to expand to other local universities.</p>
</div>
<div class="paragraph">
<p>My contributions include the implementation of saving a user&#8217;s information securely into a local file and restoring the user&#8217;s information into the application using the saved file.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-summary-of-contributions"><a class="link" href="#2-summary-of-contributions">2. Summary of Contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: This enhancement added functionality to save and load a user&#8217;s (admin or student) data.</p>
<div class="ulist">
<ul>
<li>
<p>What it does:</p>
<div class="ulist">
<ul>
<li>
<p>Allows a user to save their information as a local file on the disk.</p>
</li>
<li>
<p>Allows returning users to restore their information using the previously saved file.</p>
</li>
<li>
<p>Encrypts a user&#8217;s information by default during the saving process.</p>
</li>
<li>
<p>Displays the saved information upon issue the save command.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Justification: Improves the user experience of modsUni significantly by having the ability to save their information locally onto a disk, allowing them to restore their data during the login process.</p>
</li>
<li>
<p>Highlights: Puts confidentiality in high regard with multiple security concerns raised and discussed prior to implementation. The inbuilt security feature was also made robust to prevent users from being frustrated.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>: This enhancement added functionality to enable a user to navigate between different tabs within the application using CLI.</p>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://nus-cs2103-ay1819s1.github.io/cs2103-dashboard/#=undefined&amp;search=etjk">Functional code</a>]</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:<br></p>
<div class="ulist">
<ul>
<li>
<p>Updated <a href="https://github.com/CS2103-AY1819S1-W17-2/main/projects/1">Project Dashboard</a> on GitHub to ensure cards are up-to-date.</p>
</li>
<li>
<p>Updated Pull Requests(PRs) with the relevant tags.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Maintained the <em>Glossary</em> section of the Developer Guide (Pull request <a href="https://github.com/CS2103-AY1819S1-W17-2/main/pull/83">#83</a>).</p>
</li>
<li>
<p>Updated User Guide and Developer Guide (Pull request <a href="https://github.com/CS2103-AY1819S1-W17-2/main/pull/53">#53</a>, <a href="https://github.com/CS2103-AY1819S1-W17-2/main/pull/131">#131</a>, <a href="https://github.com/CS2103-AY1819S1-W17-2/main/pull/200">#200</a>, <a href="https://github.com/CS2103-AY1819S1-W17-2/main/pull/277">#277</a>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>Reviewed pull requests (with non-trivial review comments): (Pull request <a href="https://github.com/CS2103-AY1819S1-W17-2/main/pull/127">#127</a> and <a href="https://github.com/CS2103-AY1819S1-W17-2/main/pull/189">#189</a>).</p>
</li>
<li>
<p>Reported bugs and suggestions for other teams in the class (examples: <a href="https://github.com/CS2103-AY1819S1-W10-1/main/issues/128">1</a>, <a href="https://github.com/CS2103-AY1819S1-W10-1/main/issues/129">2</a>, <a href="https://github.com/CS2103-AY1819S1-W10-1/main/issues/131">3</a>, <a href="https://github.com/CS2103-AY1819S1-W10-1/main/issues/135">4</a>, <a href="https://github.com/CS2103-AY1819S1-W10-1/main/issues/148">5</a>, <a href="https://github.com/CS2103-AY1819S1-W10-1/main/issues/153">6</a>, <a href="https://github.com/CS2103-AY1819S1-W10-1/main/issues/159">7</a>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tool: Integrated RepoSense to the project (Pull request <a href="https://github.com/CS2103-AY1819S1-W17-2/main/pull/217">#217</a>).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="3-contributions-to-the-user-guide"><a class="link" href="#3-contributions-to-the-user-guide">3. Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="save"><a class="link" href="#save">Saving user data: <code>save</code></a></h3>
<div class="paragraph">
<p>The save command stores the current user&#8217;s information locally to a file. The saved file is used during the login process to restore a user&#8217;s information.<br>
Format: <code>save sp/&lt;FILE_NAME&gt;.xml</code></p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>save sp/userdata.xml</code><br>
Saves the current user&#8217;s data to the file name <code>userdata.xml</code>.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The prefix <code>"sp"</code> is the short form for <code>"save path"</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Figure 1 shows an example on the usage of the save command in the application.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SaveCommandExample.jpg" alt="SaveCommandExample" width="450">
</div>
</div>
<div class="paragraph">
<p><em>Figure 1. An example of a save command typed in the CLI</em></p>
</div>
<div class="paragraph">
<p>Upon entering the command, you will see the types of information stored as well as a successful message as shown in Figure 2.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SaveCommandSuccessful.jpg" alt="SaveCommandSuccessful" width="450">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2. An example of the application displaying the saved information and successful message upon entering save command</em></p>
</div>
<div class="paragraph">
<p>Upon entering the save command, a file depicted in Figure 3 will be generated.
This file will be required when logging in.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Modifying the saved file may result in the loss of data that is unrecoverable. Edit at your own risk!
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SaveFileExample.jpg" alt="SaveFileExample" width="400">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3. An example of a saved file containing a user&#8217;s information</em></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="4-contributions-to-the-developer-guide"><a class="link" href="#4-contributions-to-the-developer-guide">4. Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="save-user-feature"><a class="link" href="#save-user-feature">Save User Feature</a></h3>
<div class="paragraph">
<p>The save user feature involves mainly the saving process of a user&#8217;s attributes.
A user can save their data only after they have logged in or registered an account.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Data refers to a user&#8217;s attributes listed in <code>SaveCommand</code> under the current implementation of the save user feature in the next section.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This section will describe in details the current implementation and the design considerations of the save user feature.</p>
</div>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>The save mechanism is facilitated by the following classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SaveCommand</code><br>
The <code>SaveCommand</code> stores the following attributes of a <code>User</code> object:<br></p>
<div class="ulist">
<ul>
<li>
<p>Attributes that exist in all user:</p>
<div class="ulist">
<ul>
<li>
<p>Username<br>
The username of a user.</p>
</li>
<li>
<p>Name<br>
The name of the user.</p>
</li>
<li>
<p>Role<br>
The role of the user.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>Username</code> is unique to every user and is used for logging in. <code>Name</code> is non-unique and multiple users can use the same <code>Name</code>.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Attributes that only exist in an admin:</p>
<div class="ulist">
<ul>
<li>
<p>Salary<br>
The salary of an administrator.</p>
</li>
<li>
<p>Employment Date<br>
The employment date of an administrator.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Attributes that only exist in a student:</p>
<div class="ulist">
<ul>
<li>
<p>Enrollment Date<br>
The enrollment date of a student.</p>
</li>
<li>
<p>Major(s)<br>
A list of a student&#8217;s major.</p>
</li>
<li>
<p>Minor(s)<br>
A list of a student&#8217;s minor.</p>
</li>
<li>
<p>Modules Taken<br>
A list of modules took by a student.</p>
</li>
<li>
<p>Modules Staged<br>
A list of modules staged for the generation of candidature.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
A student must have <strong>at least one</strong> major and can have no minor.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>UserStorage</code><br>
It provides methods to save the current user&#8217;s attributes as well as to load a file containing previously saved data.<br>
<code>UserStorage</code> implements the following operations:</p>
<div class="ulist">
<ul>
<li>
<p><code>StorageManager#saveUser(…​)</code> — Save the user&#8217;s data into the specified file path.</p>
</li>
<li>
<p><code>StorageManager#readUser(…​)</code> — Reads the user&#8217;s data from the specified file path.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="implementation-of-the-save-feature"><a class="link" href="#implementation-of-the-save-feature">Implementation of the save feature</a></h5>
<div class="paragraph">
<p>The <code>save</code> mechanism of modsUni is facilitated by <code>SaveCommand</code> class and is event-driven.
It allows a user to save their data as an XML file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Both admin and student can use the save feature.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>SaveCommand</code> class extends from the <code>Command</code> class as shown below in Figure 1.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SaveCommandUML.png" alt="SaveCommandUML" width="250">
</div>
</div>
<div class="paragraph">
<p><em>Figure 1. SaveCommand UML Diagram</em></p>
</div>
<div class="paragraph">
<p>The parsing of command is performed by <code>SaveCommandParser</code>, which returns a <code>SaveCommand</code> object after parsing the save file path.
The sequence diagram shown below in Figure 2 illustrates the interactions between the Logic and Model components when the SaveCommand is being executed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SDforSaveCommandLogicAndModel.png" alt="SDforSaveCommandLogicAndModel" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2. Sequence Diagram for the interaction between Logic and Model Components when executing SaveCommand</em></p>
</div>
<div class="paragraph">
<p>The <code>save</code> feature uses multiple components of the modsUni application.
The sequence diagram shown below in Figure 3 illustrates the interactions between some of these components.
In addition, the sequence diagram also illustrates that <code>SaveCommand</code> is driven by the <code>SaveUserChangedEvent</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SequenceDiagramforSave.png" alt="SequenceDiagramforSave" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3. High-Level Sequence Diagram for the <code>save sp/userdata.xml</code> command</em></p>
</div>
<div class="paragraph">
<p>The <code>SaveUserChangedEvent</code> mentioned above is handled by the <code>Storage</code> component as shown in Figure 4.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SequenceDiagramforSaveEventHandling.png" alt="SequenceDiagramforSaveEventHandling" width="550">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4. High-Level Sequence Diagram showing how the Storage component handles <code>SaveUserChangedEvent</code> which was triggered by EventsCenter</em></p>
</div>
<div class="paragraph">
<p>The Storage component makes use of <code>XmlUserStorage</code> class to write <code>User</code> to a file specified by the file path.
Both the conversion of <code>User</code> object to <code>XmlSerializableUser</code> as well as writing to file is shown in the following code snippet below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> saveUser(User user, Path filePath, <span class="predefined-type">String</span> password) <span class="directive">throws</span> <span class="exception">IOException</span> {
    <span class="comment">// ... null checks ...</span>
    FileUtil.createIfMissing(filePath);
    XmlFileStorage.saveDataToFile(filePath, <span class="keyword">new</span> XmlSerializableUser(user, password));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>XmlFileStorage#saveDataToFile(&#8230;&#8203;)</code> utilizes <code>XmlUtil#saveDataToFile(&#8230;&#8203;)</code> to save the newly created <code>XmlSerializableUser</code> object to the file as shown in the code snipplets below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> saveDataToFile(Path file, XmlSerializableUser user) <span class="directive">throws</span> <span class="exception">FileNotFoundException</span> {
    <span class="keyword">try</span> {
        XmlUtil.saveDataToFile(file, user);
    } <span class="keyword">catch</span> (JAXBException e) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">AssertionError</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Unexpected exception </span><span class="delimiter">&quot;</span></span> + e.getMessage(), e);
    }
}</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>Given below is an example usage scenario and how the save mechanism behaves:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A student will first log into their account and add their preferred modules.</p>
</li>
<li>
<p>Upon issuing the command <code>save sp/userdata.xml</code>, the save command will call <code>Model#saveUserFile(&#8230;&#8203;)</code> which then raises <code>SaveUserChangedEvent</code>. This <code>SaveUserChangedEvent</code> is then handled by <code>StorageManager</code>.</p>
</li>
<li>
<p><code>StorageManager</code> then utilizes <code>XmlUserStorage#saveUser(&#8230;&#8203;)</code> which saves the file to the file path specified by the user.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A newly registered <code>Student</code> would be initialized and automatically logged in which enables the student to perform the save command.<br>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following activity diagram shown in Figure 5 summarizes what happens when a user executes the save command.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SaveActivityDiagram.png" alt="SaveActivityDiagram" width="550">
</div>
</div>
<div class="paragraph">
<p><em>Figure 5. Activity Diagram for the save command</em></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-data-to-save"><a class="link" href="#aspect-data-to-save">Aspect: Data to save</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Save every attribute of a <code>User</code>.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Able to restore to any state of a user.</p>
</li>
<li>
<p>Cons: Harder to implement as support for converting data of user to XML format needs to be added.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Save only the staged modules.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Will use less storage space (saving only staged module vs saving all user data).</p>
</li>
<li>
<p>Cons: Does not restore the state of a user entirely.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="data-security-feature"><a class="link" href="#data-security-feature">Data Security Feature</a></h3>
<div class="paragraph">
<p>The data security feature involves mainly the encryption of the user data file when using the <code>save</code> command and the decryption of a user data file when logging in using the <code>login</code> command.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Advanced Encryption Standard (AES) is the algorithm used for encryption.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This section will describe in details the current implementation and the design considerations of the data encryption &amp; decryption feature.</p>
</div>
<hr>
<div class="sect3">
<h4 id="current-implementation-2"><a class="link" href="#current-implementation-2">Current Implementation</a></h4>
<div class="paragraph">
<p>The data security feature is facilitated by <code>DataSecurityUtil</code> class.<br>
<code>DataSecurityUtil</code> implements the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DataSecurityUtil#encrypt(…​)</code> — Encrypts a <code>byte[]</code> with the specified password and returns the encrypted <code>byte[]</code>.</p>
</li>
<li>
<p><code>DataSecurityUtil#decrypt(…​)</code> — Decrypts a <code>byte[]</code> with the specified password and returns the decrypted <code>byte[]</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>DataSecurityUtil</code> class utilizes <code>javax.crypto.cipher</code> and <code>javax.crypto.spec.SecretKeySpec</code> packages for the operations mentioned above.</p>
</div>
<div class="paragraph">
<p>The <code>Hashing</code> class is also used to generate an SHA-1 hash to ensure that there are at least 16 bytes (128 bits) which is required to generate <code>SecretKeySpec</code>.</p>
</div>
<div class="paragraph">
<p>The encryption and decryption of user data are performed in <code>XMLAdaptedUser</code>.</p>
</div>
<div class="sect4">
<h5 id="implementation-of-the-encryption-feature"><a class="link" href="#implementation-of-the-encryption-feature">Implementation of the encryption feature</a></h5>
<div class="paragraph">
<p>The encryption feature is integrated with the <strong>Save User Feature</strong>.</p>
</div>
<div class="paragraph">
<p>During the conversion of a <code>User</code> object to XML, the encryption is performed in <code>XMLAdapterUser</code>, right before the file is written locally.
Currently, only <code>Username</code> (for all users) and <code>Salary</code> (for administrators) is encrypted.</p>
</div>
<div class="paragraph">
<p>The following code snippet shown below illustrates the encryption process:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> XmlAdaptedUser(User user, <span class="predefined-type">String</span> password) {
    <span class="comment">// ... null checks ...</span>

    <span class="comment">// All users</span>
    <span class="local-variable">this</span>.username = DataSecurityUtil.bytesToBase64(DataSecurityUtil.encrypt(
            user.getUsername().toString().getBytes(), password));
    <span class="local-variable">this</span>.name = user.getName().toString();
    <span class="local-variable">this</span>.role = user.getRole().toString();
    <span class="local-variable">this</span>.pathToProfilePic = user.getPathToProfilePic().toString();

    <span class="comment">// Admin</span>
    <span class="keyword">if</span> (user.getRole() == <span class="predefined-type">Role</span>.ADMIN) {
        Admin admin = (Admin) user;
        <span class="local-variable">this</span>.salary = DataSecurityUtil.bytesToBase64(DataSecurityUtil.encrypt(
                admin.getSalary().toString().getBytes(), password));
        <span class="local-variable">this</span>.employmentDate = admin.getEmploymentDate().toString();
    }

    <span class="comment">// ... removed for brevity ...</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The sequence diagram shown below in Figure 1 illustrates the integration of encryption with the save user feature.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SequenceDiagramforSaveEventHandlingWithEncryption.png" alt="SequenceDiagramforSaveEventHandlingWithEncryption" width="550">
</div>
</div>
<div class="paragraph">
<p><em>Figure 1. Sequence Diagram for the interaction between EventsCenter and Storage Components when executing SaveCommand with encryption</em></p>
</div>
</div>
<div class="sect4">
<h5 id="implementation-of-the-decryption-feature"><a class="link" href="#implementation-of-the-decryption-feature">Implementation of the decryption feature</a></h5>
<div class="paragraph">
<p>The decryption feature is integrated with the login feature under <strong>User Account Management</strong>.<br></p>
</div>
<div class="paragraph">
<p>When <code>LoginCommand</code> calls <code>model.readUser(&#8230;&#8203;)</code> the loading of user file will commence and the decryption will occur in <code>XMLAdapterUser#toModelType(&#8230;&#8203;)</code>.</p>
</div>
<div class="paragraph">
<p>This is shown in the following code snippets below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> User toModelType(<span class="predefined-type">String</span> password) <span class="directive">throws</span> IllegalValueException, CorruptedFileException,
        <span class="exception">NoSuchPaddingException</span>, InvalidPasswordException, <span class="exception">NoSuchAlgorithmException</span>, <span class="exception">InvalidKeyException</span> {

    User user = <span class="predefined-constant">null</span>;
    checkMandatoryFields();

    <span class="comment">// Applies to all user</span>
    <span class="predefined-type">String</span> decryptedUsername = decryptUsername(password);

    <span class="comment">// Applies to only admin</span>
    <span class="keyword">if</span> (<span class="string"><span class="delimiter">&quot;</span><span class="content">ADMIN</span><span class="delimiter">&quot;</span></span>.equals(role)) {
        checkAdminFields();
        <span class="predefined-type">String</span> decryptedSalary = decryptSalary(password);
        user = <span class="keyword">new</span> Admin(<span class="keyword">new</span> Username(decryptedUsername), <span class="keyword">new</span> <span class="predefined-type">Name</span>(name), <span class="predefined-type">Role</span>.ADMIN, <span class="keyword">new</span> Salary(decryptedSalary), <span class="keyword">new</span> EmployDate(employmentDate));
    }
    <span class="comment">// ... removed for brevity ...</span>

    <span class="keyword">return</span> user;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code snippets of <code>decryptUsername(&#8230;&#8203;)</code> and <code>decryptSalary(&#8230;&#8203;)</code> are shown below respectively:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="predefined-type">String</span> decryptUsername(<span class="predefined-type">String</span> password) <span class="directive">throws</span> <span class="exception">NoSuchAlgorithmException</span>, <span class="exception">InvalidKeyException</span>,
        InvalidPasswordException, CorruptedFileException, <span class="exception">NoSuchPaddingException</span> {
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="predefined-type">String</span>(DataSecurityUtil.decrypt(
            DataSecurityUtil.base64ToBytes(username), password), StandardCharsets.UTF_8);
}

<span class="directive">private</span> <span class="predefined-type">String</span> decryptSalary(<span class="predefined-type">String</span> password) <span class="directive">throws</span> <span class="exception">NoSuchAlgorithmException</span>, <span class="exception">InvalidKeyException</span>,
        InvalidPasswordException, CorruptedFileException, <span class="exception">NoSuchPaddingException</span> {
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="predefined-type">String</span>(DataSecurityUtil.decrypt(
        DataSecurityUtil.base64ToBytes(salary), password), StandardCharsets.UTF_8);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The sequence diagram shown below in Figure 2 illustrates the integration of decryption with the login feature.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SDforSaveCommandLogicAndModelUserDecryption.png" alt="SDforSaveCommandLogicAndModelUserDecryption" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2. Sequence Diagram for the interaction between Logic Component and DataSecurityUtil when executing LoginCommand</em></p>
</div>
<div class="paragraph">
<p>The following activity diagram shown in Figure 3 summarizes what happens in the decryption process when a user executes the login command.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/DecryptionActivityDiagram.png" alt="DecryptionActivityDiagram" width="550">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3. Activity Diagram for decryption feature in the login command</em></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-how-encryption-is-implemented"><a class="link" href="#aspect-how-encryption-is-implemented">Aspect: How encryption is implemented</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Implement as an inbuilt feature.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Confidentiality of a user&#8217;s data file is preserved at all times.</p>
</li>
<li>
<p>Cons: User does not have full control over user data file.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Implement as a command.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: User will have more control over data security.</p>
</li>
<li>
<p>Cons: Enforcement of data security outside of the application would be harder.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-generation-of-security-key-for-encryption-decryption"><a class="link" href="#aspect-generation-of-security-key-for-encryption-decryption">Aspect: Generation of security key for encryption/decryption</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Generate the key using a user&#8217;s password.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: User does not need to supply additional information or file for encryption or decryption.</p>
</li>
<li>
<p>Cons: User is unable to decrypt their user data file if they forget their password.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Generate the key using <code>KeyGenerator</code> and an additional file is needed to log in.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: The key will be more secured compared to the key generated from alternative one since a weak password that is susceptible to password cracking may be used by a user.</p>
</li>
<li>
<p>Cons: User is unable to decrypt their user data file if the key file is lost or corrupted.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-what-fields-to-encrypt"><a class="link" href="#aspect-what-fields-to-encrypt">Aspect: What fields to encrypt</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Encrypt some fields (Username and Salary).</p>
<div class="ulist">
<ul>
<li>
<p>Pros: The encryption of username ensures that a malicious user is unable to correlate a specific user data file to a credential in the credential store.
In addition, advance users can edit unencrypted fields in the user data file.</p>
</li>
<li>
<p>Cons: The user data file will contain unencrypted information.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Encrypt every field.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: The user data file is secure since every field is encrypted.</p>
</li>
<li>
<p>Cons: Advance user are unable to edit from the user data file manually.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2018-11-12 12:11:05 UTC</div></div></div></body></html>